(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(16),s=n.n(c),u=(n(21),n(4)),o=n(0),i=function(e){var t=e.notify;if(null===t)return null;var n=t.message,r=t.className;return Object(o.jsx)("div",{className:r,children:n})},l=n(3),f=n.n(l),d=n(5),j=n(6),b=n.n(j),h="/api/persons",p=function(){var e=Object(d.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.a.get(h),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.a.post(h,t),e.next=3,n;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.a.delete("".concat(h,"/").concat(t)),e.next=3,n;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(f.a.mark((function e(t,n){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.a.put("".concat(h,"/").concat(n),t),e.next=3,r;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(e){var t=e.setPersons,n=e.persons,a=e.setMessage,c=Object(r.useState)(""),s=Object(u.a)(c,2),i=s[0],l=s[1],f=Object(r.useState)(""),d=Object(u.a)(f,2),j=d[0],b=d[1];return Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r={name:i,number:j},c=n.find((function(e){return e.name===i}));void 0!==c?window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))&&v(r,c.id).then((function(e){t(n.map((function(t){return t.id===e.id?e:t}))),a({message:"Updated ".concat(e.name),className:"success"}),setTimeout((function(){a(null)}),5e3)})).catch((function(e){a({message:e.response.data.error,className:"error"}),setTimeout((function(){a(null)}),5e3)})):m(r).then((function(e){t(n.concat(e)),a({message:"".concat(e.name," Added "),className:"success"}),setTimeout((function(){a(null)}),5e3)})).catch((function(e){a({message:"".concat(i," Name must have atleast 3 characters"),className:"error"}),setTimeout((function(){a(null)}),5e3),console.log(e.response.data)})),l(""),b("")},children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{onChange:function(e){return l(e.target.value)},value:i})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{onChange:function(e){return b(e.target.value)},value:j})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},w=function(e){var t=e.filterPersons,n=e.handleDelete;return t.map((function(e){return Object(o.jsxs)("p",{children:[e.name," ",e.number,Object(o.jsx)("button",{onClick:function(){return n(e.id,e.name)},children:"delete"})]},e.id)}))},g=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(u.a)(c,2),l=s[0],f=s[1],d=Object(r.useState)(n),j=Object(u.a)(d,2),b=j[0],h=j[1],m=Object(r.useState)(null),v=Object(u.a)(m,2),g=v[0],k=v[1],y=function(e,t){window.confirm("Delete ".concat(t))&&O(e).then((function(){p().then((function(e){a(e)}))})).catch((function(e){k({message:"Information of ".concat(t," has already been removed from server"),className:"error"}),setTimeout((function(){k(null)}),5e3)}))};return Object(r.useEffect)((function(){p().then((function(e){a(e)}))}),[]),Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(i,{notify:g}),Object(o.jsxs)("div",{children:["filter shown with ",Object(o.jsx)("input",{onChange:function(e){f(e.target.value),h(n.filter((function(t){return-1!==t.name.toLowerCase().indexOf(e.target.value.toLowerCase())})))},value:l})]}),Object(o.jsx)("h2",{children:"add a new"}),Object(o.jsx)(x,{setPersons:a,setMessage:k,persons:n}),Object(o.jsx)("h2",{children:"Numbers"}),""===l?Object(o.jsx)(w,{handleDelete:y,filterPersons:n}):Object(o.jsx)(w,{handleDelete:y,filterPersons:b})]})};s.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(g,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.08a2716f.chunk.js.map